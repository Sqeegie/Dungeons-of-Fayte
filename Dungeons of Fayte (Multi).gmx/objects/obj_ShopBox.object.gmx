<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_ShopBox</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>10</depth>
  <persistent>0</persistent>
  <parentName>obj_EventBox</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>{
    ysep = 10;
    yline = 24;
    xline = 12;
    paramSet = 0;
    listOffset = 0;
    drawA = 0;
    currentOpts = 5;
    currentNo = 1;
    desc = '';
    redraw = 0;
    redColor = c_red;
    whiteColor = c_white;
    
    image_speed = 0.25;
    
    myVoter = obj_Null;

    currentMenu = 'top';

    string1color = whiteColor;
    string1 = 'Weapons';
    string1a = '';
    string1b = '';
    string1cost = 0;
    string1costcolor = whiteColor;
    
    string2color = whiteColor;
    string2 = 'Armor';
    string2a = '';
    string2b = '';
    string2cost = 0;
    string2costcolor = whiteColor;
    
    string3color = whiteColor;
    string3 = 'Rings';
    string3a = '';
    string3b = '';
    string3cost = 0;
    string3costcolor = whiteColor;
    
    string4color = whiteColor;
    string4 = 'Classes';
    string4a = '';
    string4b = '';
    string4cost = 0;
    string4costcolor = whiteColor;
    
    itempic = spr_Null;
    
    string5color = whiteColor;
    string5 = 'Stats';
    string5a = '';
    string5b = '';
    string5cost = 0;
    
    alarm[0] = 30;
    
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>{
    if(drawA == 1)
    {
        drawA = 0;
    }
    else
    {
        drawA = 1;
    }

    alarm[0] = 60;

}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>{

    if(instance_exists(myVoter))
    {
        myVoter.x = x+xline - 5;;
        myVoter.y = y+yline+ysep*(myVoter.choiceNum - 1 - listOffset)+3;
    }
    
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>{
    if(paramSet == 0)
    {
        paramSet = 1;
        
        var newobj;
        newobj = instance_create(x,y,player.voter);
        newobj.owner = id;
        newobj.numOptions = 5;
        newobj.image_angle = 270;
        
        myVoter = player.voter;
    }
    
    if(instance_exists(obj_StoreBack))
    {
    
    }
    else
    {
        myVoter.kill = 1;
        ResetPlayer(player);
        instance_destroy();
    }

    
    //QUITTING SHOP
    if(currentMenu == 'out')
    {
        redraw = 1;
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            if(myVoter.decided == 0)
            {
                
            }
            else
            {
                obj_StoreBack.outPlayers -=1;
                currentMenu = 'top';
                myVoter.decided = 0;
                myVoter.choiceNum = 1;
                myVoter.visible = 1;
                redraw = 0;
            }
        }
    
    }

    
    //TOP MENU
    if(currentMenu == 'top')
    {
        ysep = 10;
        yline = 25;
        redraw = 1;
        
        maxView = 5;
        string1 = 'Weapons';
        string1color = whiteColor;
        string2 = 'Armor';
        string2color = whiteColor;
        string3 = 'Rings';
        string3color = whiteColor;
        string4 = 'Classes';
        string4color = whiteColor;
        string5 = 'View Stats';
        string5color = whiteColor;
        listOffset = 0;
        
        myVoter.numOptions = 5;
    
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            
            if(myVoter.decided == 0)
            {
                currentMenu = 'out';
                obj_StoreBack.outPlayers +=1;
                redraw = 0;
                myVoter.visible = 0;
                //myVoter.numOptions = 1;
                myVoter.choiceNum = 1;
                myVoter.decided = 0;
            }
            else
            {
                myVoter.decided = 0;
                listOffset = 0;
                switch(myVoter.choiceNum)
                {
                    case 1:
                        currentMenu = 'weapons';
                        redraw = 0;
                        myVoter.choiceNum = 1;
                        break;
                    case 2:
                        currentMenu = 'armor';
                        redraw = 0;
                        myVoter.choiceNum = 1;
                        break;
                    case 3:
                        currentMenu = 'rings';
                        myVoter.choiceNum = 1;
                        redraw = 0;
                        break;
                    case 4:
                        currentMenu = 'classes';
                        myVoter.choiceNum = 1;
                        redraw = 0;
                        break;
                    case 5:
                        currentMenu = 'stats';
                        myVoter.choiceNum = 1;
                        redraw = 0;
                        break;
                
                }
                
                
            
            }
        
        }
    
    
    }

    //WEAPONS MENU
    if(currentMenu == 'weapons')
    {
        yline = 24;
        ysep = 16;
        redraw = 1;
        
        
        maxView = 4;
        currentOpts = ds_list_size(FindWeaponList());
        myVoter.numOptions = ds_list_size(FindWeaponList());
        
        
        pos1 = listOffset;
        pos2 = listOffset+1;
        pos3 = listOffset+2;
        pos4 = listOffset+3;
        
        string1color = whiteColor;
        string2color = whiteColor;
        string3color = whiteColor;
        string4color = whiteColor;
        string5color = whiteColor;
        
        string1 = GetShopStat('name',pos1);
        string1a = GetShopStat('stats',pos1);
        string1b = '';//GetShopStat('reqs',pos1);
        string1cost = GetShopStat('cost',pos1);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos1))
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
    
        string2 = GetShopStat('name',pos2);
        string2a = GetShopStat('stats',pos2);
        string2b = '';//GetShopStat('reqs',pos2);
        string2cost = GetShopStat('cost',pos2);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos2))
        {
            string2costcolor = whiteColor;
        }
        else
        {   
            string2costcolor = redColor;
        }
    
        string3 = GetShopStat('name',pos3);
        string3a = GetShopStat('stats',pos3);
        string3b = '';//GetShopStat('reqs',pos3);
        string3cost = GetShopStat('cost',pos3);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos3))
        {
            string3costcolor = whiteColor;
        }
        else
        {   
            string3costcolor = redColor;
        }
        
        string4 = GetShopStat('name',pos4);
        string4a = GetShopStat('stats',pos4);
        string4b = '';//GetShopStat('reqs',pos4);
        string4cost = GetShopStat('cost',pos4);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos4))
        {
            string4costcolor = whiteColor;
        }
        else
        {   
            string4costcolor = redColor;
        }
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                currentMenu = 'weapondetail';
                redraw = 0;
                currentNo = myVoter.choiceNum - 1;
                myVoter.choiceNum = 2;
                oldOffset = listOffset;
                oldMaxView = maxView;
                oldNumOptions = myVoter.numOptions;
                listOffset = 0;
            }
            else
            {
                currentMenu = 'top';
                redraw = 0;
                myVoter.choiceNum = 1;
                myVoter.decided = 0;
                listOffset = 0;
            }
        }
        
    }
    
    //WEAPON DETAILS MENU
    if(currentMenu == 'weapondetail')
    {
        ysep = 10;
        yline = 74;
        maxView = 2;
        myVoter.numOptions = 2;
        redraw = 1;
        
        var currenttype, currentmap;
        
        currenttype = FindWeaponList();
        currentmap = ds_list_find_value(currenttype,currentNo);
        
        string1color = whiteColor;
        string2color = whiteColor;
        string3color = whiteColor;
        string4color = whiteColor;
        string5color = whiteColor;
        
        string1 = ds_map_find_value(currentmap,'name');
        string1a = GetShopStat('stats',currentNo);
        string1cost = string(round(ds_map_find_value(currentmap,'cost')*costMultiplier)) + 'G';
        if(GetStat('gold',player.objMap) &gt;= ds_map_find_value(currentmap,'cost')*costMultiplier)
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
        
        string1b = '';
        desc = '';
        
        string2 = CompareStatString(currentmap,ds_map_find_value(player.objMap,'weapon'));
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                
                if(myVoter.choiceNum == 1)
                {
                    if(MeetReq(player,currentmap) &gt; 0 &amp;&amp; ds_map_find_value(player.objMap,'weapon') != currentmap)
                    {
                        if(SpendGold(player,ds_map_find_value(currentmap,'cost')) &gt; 0)
                        {
                            //PLAY A KACHING SOUND HERE
                            ds_map_replace(player.objMap,'weapon',currentmap);
                            currentMenu = 'top';
                            redraw = 0;
                            myVoter.choiceNum = 1;
                            listOffset = 0;
                        }
                        else
                        {
                            sound_play(snd_Fail);
                        
                        }
                    }
                    else
                    {
                        sound_play(snd_Fail);
                    }
                }
                else
                {
                    currentMenu = 'weapons';
                    redraw = 0;
                    myVoter.choiceNum = currentNo + 1;
                    myVoter.decided = 0;
                    listOffset = oldOffset;
                    maxView = oldMaxView;
                    myVoter.numOptions = oldNumOptions;
                }
                
            }
            else
            {
                currentMenu = 'weapons';
                redraw = 0;
                myVoter.choiceNum = currentNo + 1;
                myVoter.decided = 0;
                listOffset = oldOffset;
                maxView = oldMaxView;
                myVoter.numOptions = oldNumOptions;
            }
        }
    }
    
    
    //ARMOR MENU
    if(currentMenu == 'armor')
    {
        yline = 24;
        ysep = 16;
        redraw = 1;
        
        
        maxView = 4;
        currentOpts = ds_list_size(ArmorShop);
        myVoter.numOptions = ds_list_size(ArmorShop);
        
        
        pos1 = listOffset;
        pos2 = listOffset+1;
        pos3 = listOffset+2;
        pos4 = listOffset+3;
        
        string1 = GetShopStat('name',pos1);
        string1a = GetShopStat('stats',pos1);
        string1b = GetShopStat('reqs',pos1);
        string1cost = GetShopStat('cost',pos1);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos1))
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
        
        if(MeetReqPos(pos1) &gt; 0)
        {
            string1color = whiteColor;
        }
        else
        {
            string1color = redColor;
        }
    
        string2 = GetShopStat('name',pos2);
        string2a = GetShopStat('stats',pos2);
        string2b = GetShopStat('reqs',pos2);
        string2cost = GetShopStat('cost',pos2);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos2))
        {
            string2costcolor = whiteColor;
        }
        else
        {   
            string2costcolor = redColor;
        }
        
        if(MeetReqPos(pos2) &gt; 0)
        {
            string2color = whiteColor;
        }
        else
        {
            string2color = redColor;
        }
    
        string3 = GetShopStat('name',pos3);
        string3a = GetShopStat('stats',pos3);
        string3b = GetShopStat('reqs',pos3);
        string3cost = GetShopStat('cost',pos3);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos3))
        {
            string3costcolor = whiteColor;
        }
        else
        {   
            string3costcolor = redColor;
        }
        
        if(MeetReqPos(pos3) &gt; 0)
        {
            string3color = whiteColor;
        }
        else
        {
            string3color = redColor;
        }
        
        string4 = GetShopStat('name',pos4);
        string4a = GetShopStat('stats',pos4);
        string4b = GetShopStat('reqs',pos4);
        string4cost = GetShopStat('cost',pos4);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos4))
        {
            string4costcolor = whiteColor;
        }
        else
        {   
            string4costcolor = redColor;
        }
        
        if(MeetReqPos(pos4) &gt; 0)
        {
            string4color = whiteColor;
        }
        else
        {
            string4color = redColor;
        }
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                currentMenu = 'armordetail';
                redraw = 0;
                currentNo = myVoter.choiceNum - 1;
                myVoter.choiceNum = 2;
                oldOffset = listOffset;
                oldMaxView = maxView;
                oldNumOptions = myVoter.numOptions;
                listOffset = 0;
            }
            else
            {
                currentMenu = 'top';
                redraw = 0;
                myVoter.choiceNum = 1;
                myVoter.decided = 0;
                listOffset = 0;
            }
        }
        
    }

    
    //ARMOR DETAILS MENU
    if(currentMenu == 'armordetail')
    {
        ysep = 10;
        yline = 74;
        maxView = 2;
        myVoter.numOptions = 2;
        redraw = 1;
        
        var currenttype, currentmap;
        
        //currenttype = FindWeaponList();
        currentmap = ds_list_find_value(ArmorShop,currentNo);
        
        if(MeetReq(player,currentmap) &gt; 0)
        {
            string1color = whiteColor;
        }
        else
        {
            string1color = redColor;
        }
        
        string2color = whiteColor;
        string3color = whiteColor;
        string4color = whiteColor;
        string5color = whiteColor;
        
        string1 = ds_map_find_value(currentmap,'name');
        string1a = GetShopStat('stats',currentNo);
        string1cost = string(round(ds_map_find_value(currentmap,'cost')*costMultiplier)) + 'G';
        if(GetStat('gold',player.objMap) &gt;= ds_map_find_value(currentmap,'cost')*costMultiplier)
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
        
        string1b = GetShopStat('reqs',currentNo);
        desc = '';
        
        string2 = CompareStatString(currentmap,ds_map_find_value(player.objMap,'outfit'));
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                
                if(myVoter.choiceNum == 1)
                {
                    if(MeetReq(player,currentmap) &gt; 0 &amp;&amp; ds_map_find_value(player.objMap,'outfit') != currentmap)
                    {
                        if(SpendGold(player,ds_map_find_value(currentmap,'cost')) &gt; 0)
                        {
                            //PLAY A KACHING SOUND HERE
                            ds_map_replace(player.objMap,'outfit',currentmap);
                            currentMenu = 'top';
                            redraw = 0;
                            myVoter.choiceNum = 1;
                            listOffset = 0;
                        }
                        else
                        {
                            sound_play(snd_Fail);
                        
                        }
                    }
                    else
                    {
                        sound_play(snd_Fail);
                    }
                }
                else
                {
                    currentMenu = 'armor';
                    redraw = 0;
                    myVoter.choiceNum = currentNo + 1;
                    myVoter.decided = 0;
                    listOffset = oldOffset;
                    maxView = oldMaxView;
                    myVoter.numOptions = oldNumOptions;
                }
                
            }
            else
            {
                currentMenu = 'armor';
                redraw = 0;
                myVoter.choiceNum = currentNo + 1;
                myVoter.decided = 0;
                listOffset = oldOffset;
                maxView = oldMaxView;
                myVoter.numOptions = oldNumOptions;
            }
        }
    }
    
    
    //RINGS MENU
    if(currentMenu == 'rings')
    {
        yline = 24;
        ysep = 16;
        redraw = 1;
        
        
        maxView = 4;
        currentOpts = ds_list_size(RingShop);
        myVoter.numOptions = ds_list_size(RingShop);
        
        
        pos1 = listOffset;
        pos2 = listOffset+1;
        pos3 = listOffset+2;
        pos4 = listOffset+3;
        
        string1color = whiteColor;
        string2color = whiteColor;
        string3color = whiteColor;
        string4color = whiteColor;
        string5color = whiteColor;
        
        string1 = GetShopStat('name',pos1);
        string1a = GetShopStat('stats',pos1);
        string1b = '';//GetShopStat('reqs',pos1);
        string1cost = GetShopStat('cost',pos1);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos1))
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
    
        string2 = GetShopStat('name',pos2);
        string2a = GetShopStat('stats',pos2);
        string2b = '';//GetShopStat('reqs',pos2);
        string2cost = GetShopStat('cost',pos2);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos2))
        {
            string2costcolor = whiteColor;
        }
        else
        {   
            string2costcolor = redColor;
        }
    
        string3 = GetShopStat('name',pos3);
        string3a = GetShopStat('stats',pos3);
        string3b = '';//GetShopStat('reqs',pos3);
        string3cost = GetShopStat('cost',pos3);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos3))
        {
            string3costcolor = whiteColor;
        }
        else
        {   
            string3costcolor = redColor;
        }
        
        string4 = GetShopStat('name',pos4);
        string4a = GetShopStat('stats',pos4);
        string4b = '';//GetShopStat('reqs',pos4);
        string4cost = GetShopStat('cost',pos4);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos4))
        {
            string4costcolor = whiteColor;
        }
        else
        {   
            string4costcolor = redColor;
        }
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                currentMenu = 'ringdetail';
                redraw = 0;
                currentNo = myVoter.choiceNum - 1;
                myVoter.choiceNum = 2;
                oldOffset = listOffset;
                oldMaxView = maxView;
                oldNumOptions = myVoter.numOptions;
                listOffset = 0;
            }
            else
            {
                currentMenu = 'top';
                redraw = 0;
                myVoter.choiceNum = 1;
                myVoter.decided = 0;
                listOffset = 0;
            }
        }
        
    }

    
    //RING DETAILS MENU
    if(currentMenu == 'ringdetail')
    {
        ysep = 10;
        yline = 74;
        maxView = 2;
        myVoter.numOptions = 2;
        redraw = 1;
        
        var currenttype, currentmap;
        
        //currenttype = FindWeaponList();
        currentmap = ds_list_find_value(RingShop,currentNo);
        
        string1color = whiteColor;
        string2color = whiteColor;
        string3color = whiteColor;
        string4color = whiteColor;
        string5color = whiteColor;
        
        string1 = ds_map_find_value(currentmap,'name');
        string1a = GetShopStat('stats',currentNo);
        string1cost = string(round(ds_map_find_value(currentmap,'cost')*costMultiplier)) + 'G';
        
        if(GetStat('gold',player.objMap) &gt;= (ds_map_find_value(currentmap,'cost'))*costMultiplier)
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
        
        string1b = '';//GetShopStat('reqs',currentNo);
        desc = '';
        
        string2 = CompareStatString(currentmap,ds_map_find_value(player.objMap,'ring'));
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                
                if(myVoter.choiceNum == 1)
                {
                    if(MeetReq(player,currentmap) &gt; 0 &amp;&amp; ds_map_find_value(player.objMap,'ring') != currentmap)
                    {
                        if(SpendGold(player,ds_map_find_value(currentmap,'cost')) &gt; 0)
                        {
                            //PLAY A KACHING SOUND HERE
                            ds_map_replace(player.objMap,'ring',currentmap);
                            currentMenu = 'top';
                            redraw = 0;
                            myVoter.choiceNum = 1;
                            listOffset = 0;
                        }
                        else
                        {
                            sound_play(snd_Fail);
                        
                        }
                    }
                    else
                    {
                        sound_play(snd_Fail);
                    }
                }
                else
                {
                    currentMenu = 'rings';
                    redraw = 0;
                    myVoter.choiceNum = currentNo + 1;
                    myVoter.decided = 0;
                    listOffset = oldOffset;
                    maxView = oldMaxView;
                    myVoter.numOptions = oldNumOptions;
                }
                
            }
            else
            {
                currentMenu = 'rings';
                redraw = 0;
                myVoter.choiceNum = currentNo + 1;
                myVoter.decided = 0;
                listOffset = oldOffset;
                maxView = oldMaxView;
                myVoter.numOptions = oldNumOptions;
            }
        }
    }

    
    //CLASSES MENU
    if(currentMenu == 'classes')
    {
        yline = 24;
        ysep = 16;
        redraw = 1;
        
        
        maxView = 4;
        currentOpts = ds_list_size(ClassShop);
        myVoter.numOptions = ds_list_size(ClassShop);
        
        
        pos1 = listOffset;
        pos2 = listOffset+1;
        pos3 = listOffset+2;
        pos4 = listOffset+3;
        
        string1 = GetShopStat('name',pos1);
        //string1a = GetShopStat('stats',pos1);
        string1a = GetShopStat('reqs',pos1);
        string1b = '';
        string1cost = GetShopStat('cost',pos1);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos1))
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
        
        if(MeetReqPos(pos1) &gt; 0)
        {
            string1color = whiteColor;
        }
        else
        {
            string1color = redColor;
        }
    
        string2 = GetShopStat('name',pos2);
        //string2a = GetShopStat('stats',pos2);
        string2a = GetShopStat('reqs',pos2);
        string2b = '';
        string2cost = GetShopStat('cost',pos2);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos2))
        {
            string2costcolor = whiteColor;
        }
        else
        {   
            string2costcolor = redColor;
        }
        
        if(MeetReqPos(pos2) &gt; 0)
        {
            string2color = whiteColor;
        }
        else
        {
            string2color = redColor;
        }
    
        string3 = GetShopStat('name',pos3);
        //string3a = GetShopStat('stats',pos3);
        string3a = GetShopStat('reqs',pos3);
        string3b = '';
        string3cost = GetShopStat('cost',pos3);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos3))
        {
            string3costcolor = whiteColor;
        }
        else
        {   
            string3costcolor = redColor;
        }
        
        if(MeetReqPos(pos3) &gt; 0)
        {
            string3color = whiteColor;
        }
        else
        {
            string3color = redColor;
        }
        
        string4 = GetShopStat('name',pos4);
        //string4a = GetShopStat('stats',pos4);
        string4a = GetShopStat('reqs',pos4);
        string4b = '';
        string4cost = GetShopStat('cost',pos4);
        if(GetStat('gold',player.objMap) &gt;= GetShopStat('costint',pos4))
        {
            string4costcolor = whiteColor;
        }
        else
        {   
            string4costcolor = redColor;
        }
        
        if(MeetReqPos(pos4) &gt; 0)
        {
            string4color = whiteColor;
        }
        else
        {
            string4color = redColor;
        }
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                currentMenu = 'classdetail';
                redraw = 0;
                currentNo = myVoter.choiceNum - 1;
                myVoter.choiceNum = 2;
                oldOffset = listOffset;
                oldMaxView = maxView;
                oldNumOptions = myVoter.numOptions;
                listOffset = 0;
            }
            else
            {
                currentMenu = 'top';
                redraw = 0;
                myVoter.choiceNum = 1;
                myVoter.decided = 0;
                listOffset = 0;
            }
        }
        
    }

    
    //CLASS DETAILS MENU
    if(currentMenu == 'classdetail')
    {
        ysep = 10;
        yline = 74;
        maxView = 2;
        redraw = 1;
        myVoter.numOptions = 2;
        
        var currenttype, currentmap;
        
        //currenttype = FindWeaponList();
        currentmap = ds_list_find_value(ClassShop,currentNo);
        
        if(MeetReq(player,currentmap) &gt; 0)
        {
            string1color = whiteColor;
        }
        else
        {
            string1color = redColor;
        }
        
        string2color = whiteColor;
        string3color = whiteColor;
        string4color = whiteColor;
        string5color = whiteColor;
        
        string1 = ds_map_find_value(currentmap,'className');
        itempic = ds_map_find_value(currentmap,'sprite');
        string1a = GetShopStat('stats',currentNo);
        string1cost = string(round(ds_map_find_value(currentmap,'cost')*costMultiplier)) + 'G';
        if(GetStat('gold',player.objMap) &gt;= ds_map_find_value(currentmap,'cost')*costMultiplier)
        {
            string1costcolor = whiteColor;
        }
        else
        {   
            string1costcolor = redColor;
        }
        
        string1b = GetShopStat('reqs',currentNo);
        desc = string(ds_map_find_value(currentmap,'desc'));
        
        string2 = CompareStatString(currentmap,ds_map_find_value(player.objMap,'class'));
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                myVoter.decided = 0;
                
                if(myVoter.choiceNum == 1)
                {
                    if(MeetReq(player,currentmap) &gt; 0 &amp;&amp; ds_map_find_value(player.objMap,'class') != currentmap)
                    {
                        if(SpendGold(player,ds_map_find_value(currentmap,'cost')) &gt; 0)
                        {
                            //PLAY A KACHING SOUND HERE
                            ChangeClass(player,currentmap);
                            currentMenu = 'top';
                            redraw = 0;
                            myVoter.choiceNum = 1;
                            listOffset = 0;
                        }
                        else
                        {
                            sound_play(snd_Fail);
                        
                        }
                    }
                    else
                    {
                        sound_play(snd_Fail);
                    }
                }
                else
                {
                    currentMenu = 'classes';
                    redraw = 0;
                    myVoter.choiceNum = currentNo + 1;
                    myVoter.decided = 0;
                    listOffset = oldOffset;
                    maxView = oldMaxView;
                    myVoter.numOptions = oldNumOptions;
                }
                
            }
            else
            {
                currentMenu = 'classes';
                redraw = 0;
                myVoter.choiceNum = currentNo + 1;
                myVoter.decided = 0;
                listOffset = oldOffset;
                maxView = oldMaxView;
                myVoter.numOptions = oldNumOptions;
            }
        }
    }
    
    //STATS SHEET
    if(currentMenu == 'stats')
    {
        yline = 18;
        ysep = 16;
        redraw = 1;
        
        
        maxView = 4;
        currentOpts = 1;
        myVoter.numOptions = 1;
        
        
        //pos1 = listOffset;
        //pos2 = listOffset+1;
        //pos3 = listOffset+2;
        //pos4 = listOffset+3;
        
        string1color = whiteColor;
        string2color = whiteColor;
        string3color = whiteColor;
        string4color = whiteColor;
        string5color = whiteColor;
        
        string1 = string(ds_map_find_value(player.objMap,'playerName'));
        string1a = string(ds_map_find_value(ds_map_find_value(player.objMap,'class'),'className'));
        string1b = 'HP: ' + string(round(GetStat('life',player.objMap) + (GetStat('fortitude',player.objMap)/2)));
        
        string2 = 'STR: ' + string(GetStat('strength',player.objMap));
        string2a = 'ACC: ' + string(GetStat('accuracy',player.objMap));
        string2b = 'INT: ' + string(GetStat('intellect',player.objMap));
        
        string3 = 'FOR: ' + string(GetStat('fortitude',player.objMap));
        string3a = 'CHA: ' + string(GetStat('charm',player.objMap));
        string3b = 'ARM: ' + string(GetStat('armor',player.objMap));
                
        string4 = string(ds_map_find_value(ds_map_find_value(player.objMap,'weapon'),'name'));
        string4a = string(ds_map_find_value(ds_map_find_value(player.objMap,'outfit'),'name'));
        string4b = string(ds_map_find_value(ds_map_find_value(player.objMap,'ring'),'name'));
        
        if(myVoter.sendmessage == 1)
        {
            myVoter.sendmessage = 0;
            
            if(myVoter.decided == 1)
            {
                currentMenu = 'top';
                redraw = 0;
                myVoter.choiceNum = 1;
                myVoter.decided = 0;
                listOffset = 0;
            }
            else
            {
                currentMenu = 'top';
                redraw = 0;
                myVoter.choiceNum = 1;
                myVoter.decided = 0;
                listOffset = 0;
            }
        }
        
    }

}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>{
    if(instance_exists(player))
    {
        DrawShopBox();
    }



}</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
